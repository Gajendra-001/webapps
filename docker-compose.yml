services:

  connect-us:
    build: ./connect-us
    container_name: connect-us
    volumes:
      - ./connect-us/db.sqlite3:/app/db.sqlite3
      - ./connect-us/media:/app/media
    expose:
      - 8000
    networks:
      - my-bridge

  doctor-finder:
    build: ./doctor-finder
    container_name: doctor-finder
    volumes:
      - ./doctor-finder/db.sqlite3:/app/db.sqlite3
      - ./doctor-finder/media:/app/media
    expose:
      - 8000
    networks:
      - my-bridge

  lab-manager:
    build: ./lab-manager
    container_name: lab-manager
    volumes:
      - ./lab-manager/db.sqlite3:/app/db.sqlite3
      - ./lab-manager/media:/app/media
      - ./lab-manager/staticfiles:/app/staticfiles
    expose:
      - 8000
    networks:
      - my-bridge

  music:
    build: ./music
    container_name: music
    volumes:
      - ./music/db.sqlite3:/app/db.sqlite3
      - ./music/media:/app/music/media
    expose:
      - 8000
    networks:
      - my-bridge

  anime:
    build: ./anime
    container_name: anime
    expose:
      - 80
    networks:
      - my-bridge

  portfolio:
    build: ./portfolio
    container_name: portfolio
    expose:
      - 80
    networks:
      - my-bridge

  nginx:
    image: nginx:latest
    container_name: nginx
    ports:
      - "80:80"
    volumes:
      - ./nginx/default.conf:/etc/nginx/conf.d/default.conf
      - ./music/media:/app/music/media:ro
      - ./connect-us/media:/app/connect-us/media:ro
      - ./doctor-finder/media:/app/doctor-finder/media:ro
      - ./lab-manager/media:/app/lab-manager/media:ro
      - ./lab-manager/staticfiles:/app/lab-manager/staticfiles:ro
      
    depends_on:
      - connect-us
      - doctor-finder
      - lab-manager
      - music
      - anime
      - portfolio
    networks:
      - my-bridge

networks:
  my-bridge:
    driver: bridge
